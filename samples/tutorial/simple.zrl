module simple

pipeline Pipeline(): fvec4 {

  def vertex(pos: fvec3): fvec3 {
    builtin.position = fvec4(pos.x, pos.y, pos.z, 1.0)
    return pos
  }

  def fragment(pos: fvec3): fvec4 {
    return fvec4(pos.x, pos.y, pos.z, 1.0)
  }
}

renderer Simple(tmp: rt_rgba) {

  def main(geometry: atomlist, col: float) {
    builtin.screen = fvec4(col, 1.0 - col, 0.0, 1.0)
    for g in geometry {
      builtin.screen += Pipeline(pos = g)
    }
  }
}

