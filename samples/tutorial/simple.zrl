module simple

pipeline Pipeline(mvp: fmat4): fvec4 {

  def vertex(pos: fvec3, uv: fvec2): fvec2 {
    builtin.position = mvp * fvec4(pos.x, pos.y, pos.z, 1.0)
    return uv
  }

  def fragment(uv: fvec2): fvec4 {
    return fvec4(uv.x, uv.y, 0.0, 1.0)
  }
}

renderer Simple() {

  def main(geometry: atomlist) {
    builtin.screen = fvec4(0.2, 0.2, 0.2, 1.0) 
    for g in geometry {
      builtin.screen += Pipeline(mvp = g, pos = g, uv = g)
    }
  }
}

