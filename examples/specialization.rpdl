pipeline Pipeline[hasColor: bool](): vec4 {

  def vertex(pos, col1, col2: vec3): vec3 {
    builtin.position = vec4(pos, 1.0)
    if hasColor { 
      return col1 
    } else { 
      return col2
    }
  }

  def fragment(col: vec3): vec4 {
    return vec4(col, 1.0)
  }
}

renderer Simple(geometry: set, screen: crt) {
  for g in geometry {
    screen += Pipeline[g](pos = g)
  }
}

